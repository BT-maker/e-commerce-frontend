<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= product.name %> - Shopping</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/product-detail.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <%- include('partials/header') %>
    <%- include('partials/category-menu') %>
    

    <main class="product-detail-container">
        <div class="product-detail">
            <!-- Ürün Görselleri -->
            <div class="product-gallery">
                <div class="main-image">
                    <img src="<%= product.mainImage %>" alt="<%= product.name %>" id="mainImage">
                </div>
                <div class="thumbnail-list">
                    <% product.images.forEach(image => { %>
                        <div class="thumbnail" onclick="changeImage('<%= image %>')">
                            <img src="<%= image %>" alt="<%= product.name %>">
                        </div>
                    <% }); %>
                </div>
            </div>

            <!-- Ürün Bilgileri -->
            <div class="product-info">
                <div class="product-header">
                    <h1><%= product.name %></h1>
                    <div class="product-meta">
                        <span class="product-code">Ürün Kodu: <%= product.code %></span>
                        <div class="product-rating">
                            <div class="stars">
                                <% for(let i = 0; i < 5; i++) { %>
                                    <i class="fas fa-star <%= i < product.rating ? 'active' : '' %>"></i>
                                <% } %>
                            </div>
                            <span class="review-count">(<%= product.reviewCount %> değerlendirme)</span>
                        </div>
                    </div>
                </div>

                <div class="product-price">
                    <% if(product.oldPrice) { %>
                        <span class="old-price"><%= product.oldPrice %> TL</span>
                    <% } %>
                    <span class="current-price"><%= product.price %> TL</span>
                    <% if(product.discount) { %>
                        <span class="discount-badge">%<%= product.discount %> İndirim</span>
                    <% } %>
                </div>

                <div class="product-description">
                    <p><%= product.description %></p>
                </div>

                <!-- Ürün Özellikleri -->
                <div class="product-features">  
                    <h3>Ürün Özellikleri</h3>
                    <ul>
                        <% product.features.forEach(feature => { %>
                            <li><i class="fas fa-check"></i> <%= feature %></li>
                        <% }); %>
                    </ul>
                </div>

                <!-- Satın Alma Seçenekleri -->
                <div class="purchase-options">
                    <div class="quantity-selector">
                        <button class="quantity-btn" onclick="decreaseQuantity()">-</button>
                        <input type="number" id="quantity" value="1" min="1" max="<%= product.stock %>">
                        <button class="quantity-btn" onclick="increaseQuantity()">+</button>
                    </div>
                    <button class="add-to-cart-btn">
                        <i class="fas fa-shopping-cart"></i>
                        Sepete Ekle
                    </button>
                    <button class="buy-now-btn">
                        Hemen Al
                    </button>
                    <button class="btn btn-secondary rate-product-btn" id="openRatingModal">Değerlendir</button>
                </div>

                <!-- Ürün Detayları -->
                <div class="product-details">
                    <div class="detail-tabs">
                        <button class="tab-btn active" data-tab="description">Ürün Açıklaması</button>
                        <button class="tab-btn" data-tab="specifications">Teknik Özellikler</button>
                        <button class="tab-btn" data-tab="reviews">Değerlendirmeler</button>
                    </div>
                    <div class="tab-content">
                        <div class="tab-pane active" id="description">
                            <div class="description-content">
                                <%= product.fullDescription %>
                            </div>
                        </div>
                        <div class="tab-pane" id="specifications">
                            <table class="specifications-table">
                                <% product.specifications.forEach(spec => { %>
                                    <tr>
                                        <th><%= spec.name %></th>
                                        <td><%= spec.value %></td>
                                    </tr>
                                <% }); %>
                            </table>
                        </div>
                        <div class="tab-pane" id="reviews">
                            <div class="reviews-section">
                                <% product.reviews.forEach(review => { %>
                                    <div class="review-item">
                                        <div class="review-header">
                                            <div class="reviewer-info">
                                                <span class="reviewer-name"><%= review.userName %></span>
                                                <div class="review-rating">
                                                    <% for(let i = 0; i < 5; i++) { %>
                                                        <i class="fas fa-star <%= i < review.rating ? 'active' : '' %>"></i>
                                                    <% } %>
                                                </div>
                                            </div>
                                            <span class="review-date"><%= review.date %></span>
                                        </div>
                                        <p class="review-content"><%= review.content %></p>
                                    </div>
                                <% }); %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Rating Modal -->
    <div class="modal fade" id="ratingModal" tabindex="-1" aria-labelledby="ratingModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <img src="<%= product.mainImage %>" alt="<%= product.name %>" class="modal-product-image me-3">
                    <h5 class="modal-title flex-grow-1" id="ratingModalLabel"><%= product.name %></h5>
                    <button type="button" class="btn-close flex-shrink-0" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <h3>Ürünü değerlendirin</h3>
                    <div class="rating-stars mb-3">
                        <i class="far fa-star" data-value="1"></i>
                        <i class="far fa-star" data-value="2"></i>
                        <i class="far fa-star" data-value="3"></i>
                        <i class="far fa-star" data-value="4"></i>
                        <i class="far fa-star" data-value="5"></i>
                    </div>
                    <div class="mb-3">
                        <label for="reviewText" class="form-label visually-hidden">Your Review</label>
                        <textarea class="form-control" id="reviewText" rows="3" placeholder="Yorumunuz..."></textarea>
                    </div>
                    <p class="review-criteria-link"><a href="#">Yorum Yayınlanma Kriterleri</a></p>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-primary submit-review-btn">Değerlendir</button>
                </div>
            </div>
        </div>
    </div>

    <%- include('partials/footer') %>

   
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/rating.js"></script>
    <script src="/js/script.js"></script>
</body>
</html> 